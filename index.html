<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Days of Sara</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" type="image/x-icon" href="message-circle-heart.png">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Gochi+Hand&family=Patrick+Hand&family=VT323&family=Cedarville+Cursive&display=swap" rel="stylesheet">
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'ui': ['"Quicksand"', 'sans-serif'],
                        'hand': ['"Gochi Hand"', 'cursive'],
                        'marker': ['"Patrick Hand"', 'cursive'],
                        'retro': ['"VT323"', 'monospace'],
                        'cursive': ['"Cedarville Cursive"', 'cursive'],
                    },
                    colors: {
                        'wall': '#f3e8ff', 
                        'desk': '#8B4513', 
                        'laptop-silver': '#c0c0c0',
                        'stanley-pink': '#f9a8d4',
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0,0,0,0.1)',
                        'glow': '0 0 15px rgba(255, 255, 255, 0.5)',
                        'inner-screen': 'inset 0 0 20px rgba(0,0,0,0.2)',
                        'real': '10px 10px 20px rgba(0,0,0,0.3)',
                        'lifted': '20px 20px 40px rgba(0,0,0,0.4)',
                        'paper': '2px 3px 5px rgba(0,0,0,0.1)',
                    },
                    cursor: {
                        'mac': 'default',
                        'grab': 'grab',
                        'grabbing': 'grabbing',
                    },
                    animation: {
                        'tear': 'tearOff 1.5s ease-in-out forwards',
                    },
                    keyframes: {
                        tearOff: {
                            '0%': { transform: 'rotate(0deg)', transformOrigin: 'top left' },
                            '20%': { transform: 'rotate(10deg)', transformOrigin: 'top left' },
                            '40%': { transform: 'rotate(-5deg)', transformOrigin: 'top left' },
                            '100%': { transform: 'rotate(120deg) translateY(500px)', opacity: '0', transformOrigin: 'top left' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f3e8ff;
            overflow: hidden;
            user-select: none; 
        }

        /* --- TEXTURES --- */
        .wood-texture {
            background-color: #a05a2c;
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.05) 0px, transparent 2px, transparent 10px),
                              repeating-linear-gradient(-45deg, rgba(0,0,0,0.05) 0px, transparent 2px, transparent 5px);
            background-size: 100% 100%;
        }

        .cork-texture {
            background-color: #d4a373;
            background-image: radial-gradient(#c49a6c 15%, transparent 16%), radial-gradient(#c49a6c 15%, transparent 16%);
            background-size: 4px 4px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        .wall-texture {
            background-color: #f3e8ff;
            background-image: linear-gradient(0deg, transparent 24%, #e9d5ff 25%, #e9d5ff 26%, transparent 27%, transparent 74%, #e9d5ff 75%, #e9d5ff 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, #e9d5ff 25%, #e9d5ff 26%, transparent 27%, transparent 74%, #e9d5ff 75%, #e9d5ff 76%, transparent 77%, transparent);
            background-size: 50px 50px;
        }

        /* --- SCENE --- */
        #scene-container {
            transform-origin: center 75%;
            transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .zoomed-in {
            transform: scale(1.6) translateY(-5%) translateX(2%); 
        }

        /* --- LAPTOP OS --- */
        .laptop-screen {
            background: #000;
            overflow: hidden;
            position: relative;
            cursor: default;
        }
        
        .wallpaper {
            background: linear-gradient(135deg, #fbcfe8 0%, #c4b5fd 100%);
            position: absolute;
            inset: 0;
        }

        .dock {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .app-icon {
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .app-icon:hover {
            transform: scale(1.1) translateY(-2px);
        }

        .window {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.25);
            position: absolute;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0,0,0,0.1);
            animation: openWindow 0.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes openWindow {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .window-header {
            background: linear-gradient(to bottom, #f3f4f6, #e5e7eb);
            padding: 6px 8px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #d1d5db;
            cursor: grab;
        }
        .window-header:active {
            cursor: grabbing;
        }

        /* --- PROPS & DRAGGING --- */
        .draggable-prop {
            transition: transform 0.1s;
            cursor: grab;
        }
        .draggable-prop:active {
            cursor: grabbing;
        }
        .is-dragging {
            z-index: 100 !important;
            filter: drop-shadow(20px 20px 20px rgba(0,0,0,0.3));
            transform: scale(1.05) rotate(5deg) !important;
        }

        /* Decoration Styles */
        .washi-tape {
            background-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .ticket-stub {
            background-image: radial-gradient(circle at 0 50%, transparent 5px, currentColor 6px), 
                              radial-gradient(circle at 100% 50%, transparent 5px, currentColor 6px);
            background-size: 50% 100%;
            background-repeat: no-repeat;
            background-position: 0 0, 100% 0;
        }
        
        /* Stanley Cup */
        .stanley-cup {
            background: linear-gradient(90deg, #e0e7ff, #c7d2fe 40%, #a5b4fc 60%, #818cf8);
            position: relative;
            overflow: hidden;
        }
        .stanley-cup::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: skewX(-20deg) translateX(-150%);
            animation: shine 4s infinite;
        }
        @keyframes shine {
            100% { transform: skewX(-20deg) translateX(200%); }
        }

        /* Wordle */
        .wordle-cell { transition: all 0.5s; }
        .flip-in { transform: rotateX(90deg); }
        .flip-out { transform: rotateX(0deg); }
        
        /* Memory Game Cards */
        .memory-card {
            perspective: 1000px;
        }
        .memory-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        .memory-card-front, .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .memory-card-front {
            background: #fff;
            background-image: radial-gradient(#f9a8d4 2px, transparent 2px);
            background-size: 10px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .memory-card-back {
            background-color: white;
            transform: rotateY(180deg);
            padding: 4px;
        }
        
        /* Music Player Styles */
        .music-row:hover {
            background-color: #f3f4f6;
        }

        /* Disable dragging during zoom for props inside desk */
        .zoomed-in .desk-prop {
            pointer-events: none;
        }
    </style>
</head>
<body class="font-ui text-gray-800">

    <!-- --- SCENE --- -->
    <div id="scene-container">
        
        <!-- WALL (Background) -->
        <div class="absolute top-0 left-0 w-full h-full z-0 wall-texture">
            
            <!-- Corkboard (Static Collage) -->
            <div class="absolute top-[5%] left-1/2 -translate-x-1/2 w-[80%] h-[55%] cork-texture border-8 border-yellow-800 rounded-lg shadow-real flex flex-wrap p-8 gap-8 justify-center content-start overflow-hidden">
                
                <!-- Decoration: Washi Tape Top Corners -->
                <div class="absolute top-2 left-2 w-16 h-4 bg-pink-300/60 rotate-45 washi-tape"></div>
                <div class="absolute top-2 right-2 w-16 h-4 bg-blue-300/60 -rotate-45 washi-tape"></div>

                <!-- Prop: Polaroid 1 -->
                <div class="absolute top-10 left-10 w-32 h-40 bg-white p-2 shadow-paper transform -rotate-6">
                    <div class="w-full h-24 bg-gray-200 overflow-hidden">
                        <img src="7.jpg" class="object-cover w-full h-full grayscale opacity-70">
                    </div>
                    <div class="text-center font-hand mt-2 text-xs">Best Day Ever</div>
                    <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-red-500 shadow-sm border border-red-700"></div> 
                </div>

                <!-- Prop: Sticky Note -->
                <div class="absolute top-12 left-52 w-32 h-32 bg-yellow-200 p-4 shadow-paper transform rotate-3">
                    <div class="font-marker text-sm leading-tight text-blue-800">
                        To-Do:<br>
                        - Slay<br>
                        - Study<br>
                        - Be Pretty<br>
                        - Love Yourself
                    </div>
                    <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-12 h-4 bg-yellow-100/50 opacity-50 rotate-1"></div>
                </div>

                <!-- Prop: Polaroid 2 -->
                <div class="absolute top-12 right-30 w-32 h-40 bg-white p-2 shadow-paper transform rotate-6">
                    <div class="w-full h-24 bg-gray-200 overflow-hidden">
                        <img src="2.jpg" class="object-cover w-full h-full grayscale opacity-70">
                    </div>
                    <div class="text-center font-hand mt-2 text-xs">Cutie &lt;3</div>
                    <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-blue-500 shadow-sm border border-blue-700"></div>
                </div>

                <!-- Prop: Polaroid 3 -->
                <div class="absolute top-16 right-20 w-32 h-40 bg-white p-2 shadow-paper transform -rotate-6">
                    <div class="w-full h-24 bg-gray-200 overflow-hidden">
                        <img src="11.jpg" class="object-cover w-full h-full grayscale opacity-70">
                    </div>
                    <div class="text-center font-hand mt-2 text-xs">WOWIE!</div>
                    <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-green-500 shadow-sm border border-greem-700"></div>
                </div>

                <!-- Prop: Concert Ticket -->
                <!-- <div class="absolute bottom-10 left-20 w-48 h-16 bg-pink-200 flex items-center shadow-paper transform -rotate-2 ticket-stub px-4">
                    <div class="border-r-2 border-dashed border-pink-400 h-full mx-2"></div>
                    <div class="flex flex-col">
                        <span class="font-retro text-xs text-pink-600">ADMIT ONE</span>
                        <span class="font-bold text-sm text-pink-800 leading-none">THE ERAS TOUR</span>
                        <span class="font-retro text-[10px] text-pink-500">ROW A . SEAT 1</span>
                    </div>
                </div> -->

                <!-- Prop: Movie Stub -->
                <div class="absolute bottom-20 right-40 w-32 h-12 bg-blue-100 flex items-center justify-center shadow-paper transform rotate-12 ticket-stub text-blue-800">
                    <div class="text-center leading-none">
                        <span class="font-retro text-[10px] block">CINEMA</span>
                        <span class="font-bold text-xs block">First Date</span>
                    </div>
                </div>

                <!-- Prop: Photo Strip -->
                <div class="absolute top-5 right-[30%] w-12 h-38 bg-white p-1 shadow-paper transform rotate-2 flex flex-col gap-1">
                    <div class="w-full h-8 bg-gray-800"><img src="4.jpg" class="w-full h-8" alt=""></div>
                    <div class="w-full h-8 bg-gray-800"><img src="11.jpg" class="w-full h-8" alt=""></div>
                    <div class="w-full h-8 bg-gray-800"><img src="6.jpg" class="w-full h-8" alt=""></div>
                    <div class="w-full h-8 bg-gray-800"><img src="2.jpg" class="w-full h-8" alt=""></div>
                    <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-green-500 shadow-sm"></div>
                </div>

                <!-- Prop: Love Letter Scrap -->
                <div class="absolute bottom-10 left-20 w-32 h-20 bg-pink-200 flex items-center shadow-paper transform -rotate-2 shadow-papeer px-4">
                    <p class="font-cursive text-sm text-gray-600 leading-tight">
                        "You are my sun, my moon, and all my stars..."
                    </p>
                    <div class="absolute -top-2 right-4 w-8 h-3 bg-purple-300/50 rotate-12"></div>
                </div>

                <!-- Prop: Stickers -->
                <div class="absolute top-32 left-8 text-2xl transform -rotate-12 opacity-90">‚ú®</div>
                <div class="absolute bottom-32 right-60 text-2xl transform rotate-12 opacity-90">üíã</div>
                <div class="absolute top-10 left-[40%] text-2xl transform rotate-45 opacity-90">üå∏</div>
                <div class="absolute bottom-5 left-[45%] text-2xl transform -rotate-12 opacity-90">üçÑ</div>

            </div>

            <!-- String Lights -->
            <div class="absolute top-0 w-full flex justify-between px-10 pointer-events-none">
                <div class="w-full border-t-2 border-gray-300 relative h-10 rounded-[50%] top-[-20px]">
                    <div class="absolute left-[10%] top-[20px] w-3 h-3 bg-yellow-200 rounded-full shadow-glow animate-pulse"></div>
                    <div class="absolute left-[30%] top-[24px] w-3 h-3 bg-pink-200 rounded-full shadow-glow animate-pulse" style="animation-delay: 0.5s"></div>
                    <div class="absolute left-[50%] top-[26px] w-3 h-3 bg-blue-200 rounded-full shadow-glow animate-pulse" style="animation-delay: 1s"></div>
                    <div class="absolute left-[70%] top-[24px] w-3 h-3 bg-yellow-200 rounded-full shadow-glow animate-pulse" style="animation-delay: 0.2s"></div>
                    <div class="absolute left-[90%] top-[20px] w-3 h-3 bg-pink-200 rounded-full shadow-glow animate-pulse" style="animation-delay: 0.7s"></div>
                </div>
            </div>
        </div>

        <!-- THE DESK -->
        <div class="relative w-full h-[45%] wood-texture z-10 flex justify-center items-end pb-16 shadow-[0_-20px_60px_rgba(0,0,0,0.3)]">

            <!-- PROP: CALENDAR (Animated) -->
            <div id="prop-calendar" class="draggable-prop desk-prop absolute left-[8%] bottom-[40%] w-36 h-44 group z-20">
                <div class="w-full h-full relative transform -rotate-3 transition-transform hover:-translate-y-2">
                    <div class="absolute -top-4 left-6 w-3 h-8 bg-gray-400 rounded-full z-10 shadow-sm border border-gray-500"></div>
                    <div class="absolute -top-4 right-6 w-3 h-8 bg-gray-400 rounded-full z-10 shadow-sm border border-gray-500"></div>
                    <div class="absolute inset-0 bg-gray-800 rounded-lg transform rotate-2 shadow-2xl"></div>
                    
                    <!-- Today (Underneath) -->
                    <div class="absolute inset-0 bg-white rounded-lg shadow-inner flex flex-col items-center pt-8 border-b-8 border-gray-200">
                        <div class="w-full bg-red-500 h-2 absolute top-10 opacity-10"></div>
                        <span id="calendar-month-text" class="font-ui text-red-500 font-bold tracking-widest text-lg uppercase mt-2">Dec</span>
                        <span id="calendar-day-text" class="font-ui text-7xl font-bold text-gray-800 leading-none">2</span>
                        <span class="font-hand text-gray-400 mt-2 text-sm">Today</span>
                    </div>

                    <!-- Yesterday (Top Layer to be torn) -->
                    <div id="calendar-tear-page" class="absolute inset-0 bg-white rounded-lg shadow-md flex flex-col items-center pt-8 border-b-8 border-gray-200 calendar-tear origin-top-left z-20">
                         <div class="w-full bg-red-500 h-2 absolute top-10 opacity-10"></div>
                         <span id="calendar-month-prev" class="font-ui text-red-500 font-bold tracking-widest text-lg uppercase mt-2">Dec</span>
                         <span id="calendar-day-prev" class="font-ui text-7xl font-bold text-gray-800 leading-none">1</span>
                         <span class="font-hand text-gray-400 mt-2 text-sm">Yesterday</span>
                    </div>

                </div>
            </div>

            <!-- PROP: LAMP -->
            <div id="prop-lamp" class="draggable-prop desk-prop absolute left-[0%] bottom-[5%] z-30 w-26 h-56">
                <div class="absolute bottom-0 left-10 w-24 h-4 bg-gray-700 rounded-full shadow-lg"></div>
                <div class="absolute bottom-4 left-20 w-4 h-32 bg-gray-600 -mb-4 origin-bottom transform -rotate-12"></div>
                <div class="absolute top-10 left-8 w-32 h-20 bg-yellow-100 opacity-90 rounded-t-full rounded-b-lg border-4 border-yellow-200 shadow-[0_0_40px_rgba(253,224,71,0.6)]"></div>
            </div>

            <!-- PROP: LAPTOP (Center Stage - BIGGER) -->
            <div class="relative z-30 transform translate-y-12 group"> 
                <!-- Lid (Wider and Taller) -->
                <div class="w-[700px] h-[450px] bg-gray-100 rounded-t-2xl border-[12px] border-gray-300 shadow-2xl relative flex items-center justify-center p-1 transition-transform duration-500 origin-bottom hover:scale-[1.005]">
                    <!-- Webcam -->
                    <div class="absolute top-2 left-1/2 -translate-x-1/2 w-2 h-2 bg-black rounded-full shadow-inner flex items-center justify-center">
                        <div class="w-0.5 h-0.5 bg-blue-500 rounded-full opacity-50"></div>
                    </div>
                    
                    <!-- SCREEN CONTENT -->
                    <div id="laptop-screen" class="w-full h-full laptop-screen rounded overflow-hidden relative">
                        <!-- Boot/Off Screen -->
                        <div id="boot-screen" class="absolute inset-0 bg-black flex flex-col items-center justify-center text-white z-50 pointer-events-none">
                            <i data-lucide="heart" class="w-16 h-16 text-white mb-8"></i>
                            <div class="w-48 h-1 bg-gray-700 rounded-full overflow-hidden">
                                <div id="boot-bar" class="w-0 h-full bg-white transition-all duration-[2000ms] ease-out"></div>
                            </div>
                        </div>

                        <!-- OS DESKTOP -->
                        <div id="os-desktop" class="absolute inset-0 wallpaper hidden flex flex-col justify-between p-4 opacity-0 transition-opacity duration-1000">
                            
                            <!-- Menu Bar -->
                            <div class="absolute top-0 left-0 w-full h-7 bg-white/40 backdrop-blur-md flex justify-between items-center px-4 text-xs font-bold text-gray-800 z-10 select-none">
                                <div class="flex gap-4">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                    <span>Finder</span>
                                    <span>File</span>
                                    <span>Edit</span>
                                    <span>View</span>
                                </div>
                                <div class="flex gap-3 items-center">
                                    <i data-lucide="wifi" class="w-3 h-3"></i>
                                    <i data-lucide="battery-medium" class="w-3 h-3"></i>
                                    <span id="clock-time">11:11 AM</span>
                                </div>
                            </div>

                            <!-- Desktop Icons Grid (Smaller) -->
                            <div class="grid grid-cols-1 gap-6 pt-10 w-24 z-0 pl-2">
                                <!-- App: Game -->
                                <div onclick="openApp('game')" class="flex flex-col items-center gap-1 group cursor-pointer app-icon">
                                    <div class="w-10 h-10 bg-white rounded-lg shadow-lg flex items-center justify-center relative overflow-hidden">
                                        <div class="absolute top-0 bg-red-500 w-full h-2"></div>
                                        <span class="font-bold text-sm mt-1" id="desktop-date">1</span>
                                    </div>
                                    <span class="text-white text-[10px] font-bold drop-shadow-md bg-black/20 px-2 rounded-full">Today's Game</span>
                                </div>

                                <!-- App: Notes -->
                                <div onclick="openApp('notes')" class="flex flex-col items-center gap-1 group cursor-pointer app-icon">
                                    <div class="w-10 h-10 bg-yellow-200 rounded-lg shadow-lg flex items-center justify-center border-2 border-white">
                                        <i data-lucide="sticky-note" class="text-yellow-600 w-5 h-5"></i>
                                    </div>
                                    <span class="text-white text-[10px] font-bold drop-shadow-md bg-black/20 px-2 rounded-full">Notes</span>
                                </div>

                                <!-- App: Keys (New) -->
                                <div onclick="openApp('keys')" class="flex flex-col items-center gap-1 group cursor-pointer app-icon">
                                    <div class="w-10 h-10 bg-purple-500 rounded-lg shadow-lg flex items-center justify-center border-2 border-white/50">
                                        <i data-lucide="key" class="text-white w-5 h-5"></i>
                                    </div>
                                    <span class="text-white text-[10px] font-bold drop-shadow-md bg-black/20 px-2 rounded-full">Fragments</span>
                                </div>

                                <!-- App: Trash -->
                                <div onclick="openApp('trash')" class="flex flex-col items-center gap-1 group cursor-pointer app-icon mt-4">
                                    <div class="w-10 h-10 bg-gray-200/80 rounded-full shadow-lg flex items-center justify-center backdrop-blur">
                                        <i data-lucide="trash-2" class="text-gray-600 w-5 h-5"></i>
                                    </div>
                                    <span class="text-white text-[10px] font-bold drop-shadow-md bg-black/20 px-2 rounded-full">Trash</span>
                                </div>
                            </div>

                            <!-- Dock -->
                            <div class="mx-auto dock h-12 px-3 flex items-center gap-3 z-50">
                                <button onclick="openApp('game')" class="app-icon w-8 h-8 bg-gradient-to-br from-pink-400 to-red-500 rounded-lg shadow-lg flex items-center justify-center text-white"><i data-lucide="heart" class="w-5 h-5 fill-current"></i></button>
                                <button onclick="openApp('notes')" class="app-icon w-8 h-8 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-lg shadow-lg flex items-center justify-center text-white"><i data-lucide="sticky-note" class="w-5 h-5 fill-current"></i></button>
                                <button onclick="openApp('photos')" class="app-icon w-8 h-8 bg-white rounded-lg shadow-lg flex items-center justify-center relative overflow-hidden">
                                    <div class="w-full h-full bg-gradient-to-br from-blue-400 via-purple-400 to-pink-400 opacity-80"></div>
                                    <i data-lucide="image" class="w-5 h-5 text-white absolute"></i>
                                </button>
                                <button onclick="openApp('keys')" class="app-icon w-8 h-8 bg-purple-500 rounded-lg shadow-lg flex items-center justify-center text-white"><i data-lucide="key" class="w-5 h-5"></i></button>
                                <button onclick="openApp('music')" class="app-icon w-8 h-8 bg-green-500 rounded-full shadow-lg flex items-center justify-center text-white"><i data-lucide="music" class="w-5 h-5"></i></button>
                                <div class="w-[1px] h-6 bg-gray-400/50"></div>
                                <button onclick="openApp('')" class="app-icon w-8 h-8 bg-gray-300 rounded-lg shadow-lg flex items-center justify-center text-gray-600"><i data-lucide="settings" class="w-5 h-5 animate-spin-slow"></i></button>
                            </div>

                            <!-- WINDOW: Daily Challenge -->
                            <div id="win-game" class="window w-[400px] h-[350px] top-6 left-[120px] hidden shadow-2xl z-20" onmousedown="bringToFront('win-game')">
                                <div class="window-header">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('game')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer hover:bg-red-600"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-600 flex-1 text-center select-none">Daily Challenge.exe</span>
                                </div>
                                <div class="flex-1 bg-white overflow-hidden relative" id="game-content">
                                    <!-- Dynamic Game Loads Here -->
                                </div>
                            </div>

                            <!-- WINDOW: Music Player -->
                            <div id="win-music" class="window w-[400px] h-[350px] top-10 left-[180px] hidden z-20" onmousedown="bringToFront('win-music')">
                                <div class="window-header bg-gray-900 border-gray-700">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('music')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-300 flex-1 text-center select-none">Love Music</span>
                                </div>
                                <div class="flex-1 bg-gray-900 text-white flex flex-col">
                                    <!-- Player Header -->
                                    <div class="p-4 flex gap-4 items-center border-b border-gray-800">
                                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-md shadow-lg flex items-center justify-center">
                                            <i data-lucide="music" class="w-8 h-8 text-white"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-bold text-lg">Sara's Playlist</h3>
                                            <p class="text-xs text-gray-400">4 Songs ‚Ä¢ 16 min</p>
                                        </div>
                                    </div>
                                    <!-- Song List -->
                                    <div class="flex-1 overflow-y-auto p-2 space-y-1">
                                        <div class="music-row flex items-center gap-3 p-2 rounded hover:bg-gray-800 cursor-pointer group">
                                            <span class="text-xs text-gray-500 w-4">1</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-bold text-gray-200">White Mustang</div>
                                                <div class="text-xs text-gray-500">Lana Del Ray</div>
                                            </div>
                                            <i onclick="playSong('1.mp3')" data-lucide="play" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                            <i onclick="currentAudio.pause()" data-lucide="pause" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                        </div>
                                        <div class="music-row flex items-center gap-3 p-2 rounded hover:bg-gray-800 cursor-pointer group">
                                            <span class="text-xs text-gray-500 w-4">2</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-bold text-gray-200">Be My Baby</div>
                                                <div class="text-xs text-gray-500">The Ronettes</div>
                                            </div>
                                            <i onclick="playSong('2.mp3')" data-lucide="play" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                            <i onclick="currentAudio.pause()" data-lucide="pause" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                        </div>
                                        <div class="music-row flex items-center gap-3 p-2 rounded hover:bg-gray-800 cursor-pointer group">
                                            <span class="text-xs text-gray-500 w-4">3</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-bold text-gray-200">Brooklyn Baby</div>
                                                <div class="text-xs text-gray-500">Lana Del Ray</div>
                                            </div>
                                            <i onclick="playSong('3.mp3')" data-lucide="play" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                            <i onclick="currentAudio.pause()" data-lucide="pause" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                        </div>
                                        <div class="music-row flex items-center gap-3 p-2 rounded hover:bg-gray-800 cursor-pointer group">
                                            <span class="text-xs text-gray-500 w-4">4</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-bold text-gray-200">Heaven and Back</div>
                                                <div class="text-xs text-gray-500">Chase Atlantic</div>
                                            </div>
                                            <i onclick="playSong('4.mp3')" data-lucide="play" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                            <i onclick="currentAudio.pause()" data-lucide="pause" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>                                        </div>
                                        <div class="music-row flex items-center gap-3 p-2 rounded hover:bg-gray-800 cursor-pointer group">
                                            <span class="text-xs text-gray-500 w-4">5</span>
                                            <div class="flex-1">
                                                <div class="text-sm font-bold text-gray-200">Goodnight</div>
                                                <div class="text-xs text-gray-500">Artist 5</div>
                                            </div>
                                            <i onclick="playSong('')" data-lucide="play" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>
                                            <i onclick="currentAudio.pause()" data-lucide="pause" class="w-4 h-4 text-white opacity-0 group-hover:opacity-100 fill-current"></i>                                        </div>
                                    </div>
                                    <!-- Now Playing Bar -->
                                    <div class="h-16 bg-gray-800 border-t border-gray-700 flex items-center px-4 justify-between">
                                        <div class="flex flex-col">
                                            <span id="player-title" class="text-sm font-bold text-white">Select a song</span>
                                            <span class="text-xs text-gray-400">...</span>
                                        </div>
                                        <div class="flex gap-4 items-center">
                                            <i data-lucide="skip-back" class="w-5 h-5 text-gray-400"></i>
                                            <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center cursor-pointer hover:scale-105">
                                                <i data-lucide="play" class="w-4 h-4 text-black fill-current ml-0.5"></i>
                                            </div>
                                            <i data-lucide="skip-forward" class="w-5 h-5 text-gray-400"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- WINDOW: Keys (New) -->
                            <div id="win-keys" class="window w-[320px] h-[250px] top-12 left-[200px] hidden z-20" onmousedown="bringToFront('win-keys')">
                                <div class="window-header">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('keys')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-600 flex-1 text-center select-none">My Fragments</span>
                                </div>
                                <div class="flex-1 bg-gray-50 p-6 flex flex-col items-center justify-center">
                                    <i data-lucide="lock-keyhole" class="w-10 h-10 text-purple-400 mb-2"></i>
                                    <p class="text-xs text-gray-500 mb-4 font-ui">Fragments Collected</p>
                                    <div id="key-display-os" class="font-mono text-2xl tracking-[0.3em] font-bold text-gray-700 bg-white px-4 py-2 rounded border shadow-inner">
                                        _ _ _ _ _
                                    </div>
                                </div>
                            </div>

                            <!-- WINDOW: Notes -->
                            <div id="win-notes" class="window w-[300px] h-[250px] top-10 left-[150px] hidden z-20" onmousedown="bringToFront('win-notes')">
                                <div class="window-header">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('notes')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-600 flex-1 text-center select-none">Notes</span>
                                </div>
                                <div class="flex-1 bg-yellow-50 p-4 font-hand text-lg text-gray-800 overflow-y-auto">
                                    Hey Barbie Doll! <br>
                                    Wanna hear a joke? <br><br>
                                    Why don‚Äôt the circus lions eat the clowns? <br><br><br><br><br>
                                    Because they taste funny! üòÇ <br><br>
                                    Sorry for the dad joke and good luck with the game! <br><br>
                                    Love, <br>
                                    Your Sheesh ‚ù§Ô∏è
                                </div>
                            </div>

                            <!-- WINDOW: Settings (Reset) -->
                            <div id="win-settings" class="window w-[300px] h-[200px] top-16 left-[250px] hidden z-20" onmousedown="bringToFront('win-settings')">
                                <div class="window-header">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('settings')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-600 flex-1 text-center select-none">Settings</span>
                                </div>
                                <div class="flex-1 bg-gray-50 p-6 flex flex-col items-center justify-center space-y-4">
                                    <i data-lucide="settings" class="w-8 h-8 text-gray-400"></i>
                                    <div class="text-center">
                                        <h3 class="font-bold text-sm text-gray-700">System Admin</h3>
                                        <p class="text-xs text-gray-500">Manage Birthday OS</p>
                                    </div>
                                    <button onclick="resetProgress()" class="bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-2 px-4 rounded shadow-md transition-colors flex items-center gap-2">
                                        <i data-lucide="refresh-cw" class="w-3 h-3"></i> Reset Progress
                                    </button>
                                </div>
                            </div>

                            <!-- WINDOW: Photos -->
                            <div id="win-photos" class="window w-[350px] h-[280px] top-8 left-[120px] hidden z-20" onmousedown="bringToFront('win-photos')">
                                <div class="window-header">
                                    <div class="flex gap-1.5 mr-4">
                                        <div onclick="closeApp('photos')" class="w-3 h-3 rounded-full bg-red-500 cursor-pointer"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <span class="text-xs font-bold text-gray-600 flex-1 text-center select-none">Gallery</span>
                                </div>
                                <div class="flex-1 bg-gray-100 p-2 grid grid-cols-2 gap-2 overflow-y-auto">
                                    <div class="bg-white p-1 shadow-sm h-28 flex items-center justify-center text-xs text-gray-400"><img src="3.jpg" class="w-full h-24"alt=""></div>
                                    <div class="bg-white p-1 shadow-sm h-28 flex items-center justify-center text-xs text-gray-400"><img src="4.jpg" class="w-full h-24" alt=""></div>
                                    <div class="bg-white p-1 shadow-sm h-28 flex items-center justify-center text-xs text-gray-400"><img src="6.jpg" class="w-full h-24" alt=""></div>
                                    <div class="bg-white p-1 shadow-sm h-28 flex items-center justify-center text-xs text-gray-400"><img src="11.jpg" class="w-full h-24" alt=""></div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>
                
                <!-- Keyboard Base (Wider) -->
                <div class="w-[840px] h-[40px] bg-gradient-to-b from-gray-300 to-gray-400 rounded-b-xl shadow-[0_20px_40px_rgba(0,0,0,0.4)] -ml-[70px] relative z-20">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-40 h-3 bg-gray-400 rounded-b-lg border-b border-white/20"></div>
                </div>
            </div>

            <!-- PROP: STANLEY CUP (Right) -->
            <div id="prop-stanley" class="draggable-prop desk-prop absolute right-[15%] bottom-[8%] z-40 transform scale-110 w-24 h-40 group">
                <div class="relative w-full h-full stanley-cup rounded-b-2xl shadow-real flex justify-center border-t border-white/30 pointer-events-none">
                    <div class="absolute -top-3 w-26 h-5 bg-gray-300 rounded-md w-[104%] border-b border-gray-400"></div>
                    <div class="absolute -top-16 left-10 w-3 h-20 bg-white/90 transform -rotate-6 shadow-sm"></div>
                    <div class="absolute top-6 -right-8 w-10 h-20 border-8 border-stanley-pink rounded-r-2xl shadow-md"></div>
                    <div class="absolute top-12 w-10 h-10 bg-white/30 rounded-full flex items-center justify-center backdrop-blur-sm">
                        <i data-lucide="mountain" class="w-5 h-5 text-white"></i>
                    </div>
                </div>
            </div>

            <!-- PROP: BOOKS (Now 3) -->
            <div id="prop-books" class="draggable-prop desk-prop absolute right-[4%] bottom-[70%] z-10 w-52 h-20">
                 <div class="w-48 h-8 bg-blue-900 rounded-l-sm border-l-4 border-yellow-500 shadow-md mb-[-2px] flex items-center pl-2 text-yellow-500/50 text-[8px] font-retro transform rotate-3">GROPOLITICS 101</div>
                 <div class="w-52 h-10 bg-red-900 rounded-l-sm border-l-4 border-white shadow-md mb-[-2px] ml-2 flex items-center pl-2 text-white/50 text-[8px] font-retro transform rotate-2">ECONOMICS OF US</div>
                 <div class="w-46 h-9 bg-green-800 rounded-l-sm border-l-4 border-green-300 shadow-md ml-4 flex items-center pl-2 text-green-200/50 text-[8px] font-retro transform -rotate-1">MATHEMATHS AP-1</div>
            </div>

            <!-- PROP: HEADPHONES (New)
            <div id="prop-headphones" class="draggable-prop desk-prop absolute right-[18%] bottom-[15%] z-20 w-32 h-32 transform -rotate-12 opacity-90">
                <i data-lucide="headphones" class="w-full h-full text-indigo-400 fill-indigo-200"></i>
            </div> -->

        </div>
    </div>

    <!-- UI: Back Button -->
    <button id="back-btn" onclick="zoomOut()" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur px-6 py-3 rounded-full shadow-2xl font-ui font-bold text-gray-700 hover:text-pink-600 hover:scale-105 transition-all opacity-0 pointer-events-none flex items-center gap-2 border border-white">
        <i data-lucide="arrow-left" class="w-5 h-5"></i> Back to Desk
    </button>

    <script>
        // --- CONFIG ---
        const CURRENT_DAY = 3; // Testing Day 2
        const WORDLE_SOLUTION = "HEART";

        // --- STATE ---
        let isZoomed = false;
        let isOSBooted = false;
        let collectedKeys = JSON.parse(localStorage.getItem('birthdayKeys')) || ["H", "1"];
        let maxZIndex = 30; 
        let currentAudio = null; // Music Player

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            initCalendarAnimation();
            renderKeys();
            startClock();
            initDraggableProps();
            initDraggableWindows();
        });

        // --- CALENDAR ANIMATION ---
        function initCalendarAnimation() {
            const now = new Date();
            const todayDate = now.getDate();
            const month = now.toLocaleString('default', { month: 'short' });

            // Calculate Yesterday
            const yesterday = new Date(now);
            yesterday.setDate(yesterday.getDate() - 1);
            const prevDate = yesterday.getDate();
            const prevMonth = yesterday.toLocaleString('default', { month: 'short' });

            // Set Text
            document.getElementById('calendar-day-text').textContent = todayDate;
            document.getElementById('calendar-month-text').textContent = month;
            document.getElementById('calendar-day-prev').textContent = prevDate;
            document.getElementById('calendar-month-prev').textContent = prevMonth;
            
            // Set Desktop Icon Date
            document.getElementById('desktop-date').textContent = todayDate;

            // Trigger Animation after delay
            setTimeout(() => {
                document.getElementById('calendar-tear-page').classList.add('animate-tear');
            }, 2000);
        }

        // --- PROPS INTERACTIVITY ---
        function initDraggableProps() {
            const props = ['prop-calendar', 'prop-lamp', 'prop-stanley', 'prop-books', 'prop-headphones'];
            
            props.forEach(id => {
                const el = document.getElementById(id);
                if(!el) return;

                let isDragging = false;
                let startX, startY, initialLeft, initialTop;
                let dragThreshold = 0;

                el.addEventListener('mousedown', (e) => {
                    if(isZoomed) return;

                    isDragging = true;
                    dragThreshold = 0;
                    startX = e.clientX;
                    startY = e.clientY;
                    
                    initialLeft = el.offsetLeft;
                    initialTop = el.offsetTop;

                    el.classList.add('is-dragging');
                    el.style.cursor = 'grabbing';
                    el.style.zIndex = 100;
                });

                window.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();

                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    dragThreshold += Math.abs(dx) + Math.abs(dy);

                    el.style.left = `${initialLeft + dx}px`;
                    el.style.top = `${initialTop + dy}px`;
                });

                window.addEventListener('mouseup', () => {
                    if (!isDragging) return;
                    isDragging = false;
                    el.classList.remove('is-dragging');
                    el.style.cursor = 'grab';
                    el.style.zIndex = ''; 

                    if(id === 'prop-calendar' && dragThreshold < 5) {
                        zoomToDesk();
                    }
                });
            });
        }

        // --- WINDOW INTERACTIVITY ---
        function initDraggableWindows() {
            const windows = document.querySelectorAll('.window');
            windows.forEach(win => {
                const header = win.querySelector('.window-header');
                let isDragging = false;
                let startX, startY, initialLeft, initialTop;

                header.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    startX = e.clientX;
                    startY = e.clientY;
                    initialLeft = win.offsetLeft;
                    initialTop = win.offsetTop;
                    
                    // Bring to front on drag start
                    bringToFront(win.id);
                });

                window.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    win.style.left = `${initialLeft + dx}px`;
                    win.style.top = `${initialTop + dy}px`;
                });

                window.addEventListener('mouseup', () => {
                    isDragging = false;
                });
            });
        }

        function bringToFront(windowId) {
            maxZIndex++;
            document.getElementById(windowId).style.zIndex = maxZIndex;
        }

        // --- VIEW CONTROLLER ---
        function renderKeys() {
            const display = document.getElementById('key-display-os');
            if(collectedKeys.length === 0) {
                display.textContent = "_ _ _ _ _ _ _ _ _ _";
                display.classList.add('text-gray-400');
            } else {
                display.textContent = collectedKeys.join('');
                display.classList.remove('text-gray-400');
            }
        }

        function startClock() {
            setInterval(() => {
                const now = new Date();
                document.getElementById('clock-time').textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }, 1000);
        }

        function zoomToDesk() {
            if(isZoomed) return;
            isZoomed = true;

            const container = document.getElementById('scene-container');
            
            container.classList.add('zoomed-in');

            if (!isOSBooted) {
                setTimeout(() => {
                    document.getElementById('boot-bar').style.width = '100%';
                }, 1000);

                setTimeout(() => {
                    document.getElementById('boot-screen').classList.add('hidden');
                    document.getElementById('os-desktop').classList.remove('hidden');
                    setTimeout(() => {
                        document.getElementById('os-desktop').classList.remove('opacity-0');
                    }, 100);
                    isOSBooted = true;
                }, 3500);
            }

            setTimeout(() => {
                document.getElementById('back-btn').classList.remove('opacity-0', 'pointer-events-none');
            }, 1500);
        }

        function zoomOut() {
            if(!isZoomed) return;
            isZoomed = false;

            const container = document.getElementById('scene-container');
            
            container.classList.remove('zoomed-in');
            document.getElementById('back-btn').classList.add('opacity-0', 'pointer-events-none');
        }

        // --- OS LOGIC ---

        function openApp(appId) {
            if(appId === 'trash') { alert("Trash is empty because you are perfect! ‚ú®"); return; }

            const win = document.getElementById(`win-${appId}`);
            if(win) {
                win.classList.remove('hidden');
                bringToFront(`win-${appId}`);
                
                if(appId === 'game') {
                    loadGame(CURRENT_DAY);
                }
            }
        }

        function closeApp(appId) {
            if(event) event.stopPropagation();
            const win = document.getElementById(`win-${appId}`);
            if(win) win.classList.add('hidden');
        }

        function resetProgress() {
            if(confirm("Are you sure you want to reset all game progress?")) {
                localStorage.removeItem('birthdayKeys');
                location.reload();
            }
        }
        
        // --- MUSIC APP LOGIC ---
        function playSong(trackId) {
            // Stop current if playing
            if(currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            const titles = ["Favorite Song", "Road Trip Vibe", "Slow Dance", "Party Anthem", "Goodnight"];
            const songName = titles[trackId - 1];
            
            document.getElementById('player-title').textContent = "Playing: " + songName;
            
            // Try to play file (will fail if file doesn't exist locally, but this is the logic)
            currentAudio = new Audio(`${trackId}`);
            currentAudio.play().catch(e => console.log("Audio file not found (expected for demo):", e));
        }

        // --- GAME LOGIC MANAGER ---

        function loadGame(day) {
            const container = document.getElementById('game-content');
            container.innerHTML = ''; 

            if(day === 1) {
                // Day 1: Wordle
                if(collectedKeys.includes("H")) {
                    showWinScreen(container, "Day 1 Complete!", "H");
                } else {
                    initWordle(container);
                }
            } else if (day === 2) {
                // Day 2: Memory
                if(collectedKeys.includes("1")) {
                    showWinScreen(container, "Day 2 Complete!", "1");
                } else {
                    initMemoryGame(container);
                }
            } else if (day === 3) {
                // Day 3: Quiz
                if(collectedKeys.includes("K")) {
                    showWinScreen(container, "Day 3 Complete!", "K");
                } else {
                    initQuizGame(container);
                }
            } else if (day === 4) {
                // Day 4: Scavenger Hunt
                if(collectedKeys.includes("P")) { // Using P2 to distinguish from Day 3
                    showWinScreen(container, "Day 4 Complete!", "P");
                } else {
                    initScavengerHunt(container);
                }
            } else {
                // Locked State
                container.innerHTML = `
                    <div class="h-full flex flex-col items-center justify-center text-center bg-gray-50">
                        <i data-lucide="lock" class="w-12 h-12 text-gray-400 mb-2"></i>
                        <h2 class="font-bold text-gray-600">Locked</h2>
                        <p class="text-xs text-gray-400">Come back on Day ${day}</p>
                    </div>
                `;
                lucide.createIcons();
            }
        }

        function showWinScreen(container, title, fragment) {
            container.innerHTML = `
                <div class="h-full flex flex-col items-center justify-center bg-green-50 animate-fade-in">
                    <i data-lucide="check-circle" class="w-16 h-16 text-green-500 mb-2"></i>
                    <h2 class="font-bold text-xl text-green-700">${title}</h2>
                    <p class="text-sm text-gray-500">You have the key fragment: "${fragment}"</p>
                </div>
            `;
            lucide.createIcons();
        }

        // --- GAME 1: WORDLE ---
        function initWordle(container) {
            container.innerHTML = `
                <div class="flex flex-col h-full p-4 bg-white items-center">
                    <h3 class="font-bold text-pink-500 mb-2 font-ui tracking-widest">WORDLE <span class="text-xs text-gray-400 font-normal">Love Edition</span></h3>
                    <div id="wordle-grid" class="grid grid-rows-5 gap-1 mb-2"></div>
                    <div id="wordle-keyboard" class="w-full flex flex-col gap-1 mt-auto pb-2"></div>
                </div>
            `;
            // ... (Existing Wordle Logic, kept concise for file size, but functionality is preserved in prev versions) ...
            // Re-implementing strictly for this file to be standalone
            const grid = document.getElementById('wordle-grid');
            const keyboard = document.getElementById('wordle-keyboard');
            let guesses = Array(5).fill().map(() => Array(5).fill(''));
            let currentRow = 0;
            let currentTile = 0;
            let isGameOver = false;

            guesses.forEach((row, r) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'grid grid-cols-5 gap-1';
                row.forEach((_, c) => {
                    const tile = document.createElement('div');
                    tile.id = `cell-${r}-${c}`;
                    tile.className = 'w-7 h-7 border border-gray-300 flex items-center justify-center font-bold text-sm text-gray-600 wordle-cell uppercase';
                    rowDiv.appendChild(tile);
                });
                grid.appendChild(rowDiv);
            });

            const keys = ['QWERTYUIOP', 'ASDFGHJKL', 'ZXCVBNM'];
            keys.forEach((rowStr, idx) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex justify-center gap-0.5';
                if (idx === 2) {
                    const btn = document.createElement('button');
                    btn.textContent = 'ENTER';
                    btn.className = 'px-1 text-[8px] bg-gray-200 rounded hover:bg-pink-100 font-bold text-gray-600 shadow-sm';
                    btn.onclick = () => { if(!isGameOver && currentTile===5) checkRow(); };
                    rowDiv.appendChild(btn);
                }
                rowStr.split('').forEach(char => {
                    const btn = document.createElement('button');
                    btn.textContent = char;
                    btn.id = `key-${char}`;
                    btn.className = 'w-6 h-8 text-[10px] bg-gray-100 rounded hover:bg-pink-100 font-bold text-gray-600 shadow-sm';
                    btn.onclick = () => { if(!isGameOver && currentTile<5) { guesses[currentRow][currentTile] = char; currentTile++; updateGrid(); }};
                    rowDiv.appendChild(btn);
                });
                if (idx === 2) {
                    const btn = document.createElement('button');
                    btn.textContent = '‚å´';
                    btn.className = 'px-1 text-[8px] bg-gray-200 rounded hover:bg-pink-100 font-bold text-gray-600 shadow-sm';
                    btn.onclick = () => { if(!isGameOver && currentTile>0) { currentTile--; guesses[currentRow][currentTile] = ''; updateGrid(); }};
                    rowDiv.appendChild(btn);
                }
                keyboard.appendChild(rowDiv);
            });

            function updateGrid() {
                guesses.forEach((row, r) => { row.forEach((val, c) => { document.getElementById(`cell-${r}-${c}`).textContent = val; }); });
            }

            function checkRow() {
                const guess = guesses[currentRow].join('');
                const solution = WORDLE_SOLUTION;
                for(let i=0; i<5; i++) {
                    const cell = document.getElementById(`cell-${currentRow}-${i}`);
                    const letter = guesses[currentRow][i];
                    const keyBtn = document.getElementById(`key-${letter}`);
                    setTimeout(() => {
                        cell.classList.add('flip-in');
                        setTimeout(() => {
                            let color = 'bg-gray-400 text-white border-gray-400';
                            if(letter === solution[i]) color = 'bg-green-500 text-white border-green-500';
                            else if(solution.includes(letter)) color = 'bg-yellow-400 text-white border-yellow-400';
                            cell.className = `w-8 h-8 flex items-center justify-center font-bold text-sm wordle-cell flip-out ${color}`;
                            if(keyBtn) { keyBtn.classList.remove('bg-gray-100'); keyBtn.classList.add(color.split(' ')[0], 'text-white'); }
                        }, 200);
                    }, i * 100);
                }
                setTimeout(() => {
                    if(guess === solution) { isGameOver = true; setTimeout(() => { alert("Correct! Key: 'H'"); saveKey('H'); closeApp('game'); }, 1000); } 
                    else if(currentRow === 4) { alert("Try again!"); isGameOver = true; } 
                    else { currentRow++; currentTile = 0; }
                }, 1200);
            }
        }

        // --- GAME 2: MEMORY MATCH (5x6 Grid) ---

        function initMemoryGame(container) {
            container.innerHTML = `
                <div class="flex flex-col h-full p-2 bg-white items-center">
                    <h3 class="font-bold text-blue-500 mb-1 font-ui">Photo Memory</h3>
                    <div id="memory-grid" class="grid grid-cols-6 gap-2 w-full max-w-[400px]"></div>
                </div>
            `;
            
            const grid = document.getElementById('memory-grid');
            
            // Generate 30 Cards (15 pairs)
            const iconsList = ['camera', 'heart', 'star', 'music', 'coffee', 'sun', 'moon', 'cloud', 'flower', 'smile', 'zap', 'anchor', 'bell', 'feather', 'key'];
            let cards = [...iconsList, ...iconsList];
            
            // Shuffle
            cards.sort(() => 0.5 - Math.random());
            
            let flippedCards = [];
            let matchedPairs = 0;
            let lockBoard = false;

            cards.forEach((icon) => {
                const card = document.createElement('div');
                // Adjust size for larger grid
                card.className = 'memory-card w-full h-10 cursor-pointer'; 
                card.dataset.icon = icon;
                
                card.innerHTML = `
                    <div class="memory-card-inner w-full h-full shadow-sm rounded">
                        <div class="memory-card-front bg-pink-100 rounded flex items-center justify-center border border-white">
                             <div class="w-4 h-4 bg-pink-300 rounded-full opacity-50"></div>
                        </div>
                        <div class="memory-card-back bg-white rounded flex items-center justify-center border border-blue-200">
                             <i data-lucide="${icon}" class="text-blue-500 w-4 h-4"></i>
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', () => flipCard(card));
                grid.appendChild(card);
            });
            
            lucide.createIcons();

            function flipCard(card) {
                if(lockBoard) return;
                if(card === flippedCards[0]) return;
                
                card.classList.add('flipped');
                flippedCards.push(card);
                
                if(flippedCards.length === 2) {
                    lockBoard = true;
                    checkForMatch();
                }
            }
            
            function checkForMatch() {
                const [card1, card2] = flippedCards;
                const isMatch = card1.dataset.icon === card2.dataset.icon;
                
                if(isMatch) {
                    disableCards();
                } else {
                    unflipCards();
                }
            }
            
            function disableCards() {
                matchedPairs++;
                flippedCards = [];
                lockBoard = false;
                
                if(matchedPairs === 15) { // 15 pairs total
                    setTimeout(() => {
                        alert("Memory Unlocked! Key Fragment: 'A'");
                        saveKey('1');
                        closeApp('game');
                    }, 500);
                }
            }
            
            function unflipCards() {
                setTimeout(() => {
                    flippedCards[0].classList.remove('flipped');
                    flippedCards[1].classList.remove('flipped');
                    flippedCards = [];
                    lockBoard = false;
                }, 1000);
            }
        }


        // --- GAME 3: THE QUIZ ---
        function initQuizGame(container) {
            // CUSTOMIZE YOUR QUESTIONS HERE
            const questions = [
                {
                    q: "Where did we go on our first proper date?",
                    options: ["CP", "Movies", "Diggin"],
                    correct: 0 // Index of the correct answer (0, 1, 2, 3)
                },
                {
                    q: "What is my favorite color on you?",
                    options: ["Red", "Blue", "Black"],
                    correct: 2
                },
                {
                    q: "Who will be the most successful diplomat in India's history?",
                    options: ["Ofcourse you, Sweetie"],
                    correct: 0
                },
                {
                    q: "What color did you wear on our first date?",
                    options: ["Red","Black", "Pink"],
                    correct: 2
                },
                {
                    q: "Who is the most awesomest person ever?",
                    options: ["Sheesh", "Saaru", "It is a tie"],
                    correct: 1
                }
            ];

            let currentQ = 0;

            function renderQuestion() {
                const q = questions[currentQ];
                container.innerHTML = `
                    <div class="flex flex-col h-full p-3 bg-white items-center justify-center text-center">
                        <h3 class="font-bold text-purple-500 mb-2 font-ui text-xl">The Us Quiz</h3>
                        
                        <div class="mb-2">
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Question ${currentQ + 1}/${questions.length}</span>
                            <p class="font-hand text-xl mt-2 text-gray-800">${q.q}</p>
                        </div>

                        <div class="grid grid-cols-1 gap-3 w-full max-w-xs">
                            ${q.options.map((opt, idx) => `
                                <button onclick="handleAnswer(${idx})" class="w-full py-3 px-4 bg-gray-100 hover:bg-purple-100 hover:text-purple-600 rounded-lg font-bold text-gray-600 transition-all border-2 border-transparent hover:border-purple-300">
                                    ${opt}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Attach to window so HTML string can call it
            window.handleAnswer = (idx) => {
                if (idx === questions[currentQ].correct) {
                    currentQ++;
                    if (currentQ < questions.length) {
                        renderQuestion(); // Next Question
                    } else {
                        // Win
                        alert("You know us so well! Key Fragment: 'K'");
                        saveKey('K');
                        closeApp('game');
                    }
                } else {
                    alert("Wrong!üòú Try again, Cutie!");
                }
            };

            renderQuestion();
        }

        // --- GAME 4: SCAVENGER HUNT ---
        function initScavengerHunt(container) {
            container.innerHTML = `
                <div class="flex flex-col h-full p-6 bg-white items-center justify-center text-center">
                    <i data-lucide="search" class="w-12 h-12 text-orange-400 mb-4"></i>
                    <h3 class="font-bold text-gray-800 mb-2 font-ui text-xl">Digital Scavenger Hunt</h3>
                    
                    <p class="font-ui text-sm text-gray-600 mb-6 max-w-[250px]">
                        I have hidden a secret code inside the <b>Notes App</b>. 
                        Go find it and enter it below!
                    </p>

                    <input id="hunt-input" type="text" placeholder="Enter code here..." class="w-full max-w-xs p-3 border-2 border-gray-300 rounded-lg text-center font-mono uppercase tracking-widest mb-4 focus:outline-none focus:border-orange-400">
                    
                    <button onclick="checkScavengerCode()" class="bg-orange-400 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-orange-500 transition-transform hover:scale-105">
                        Unlock
                    </button>
                </div>
            `;
            lucide.createIcons();

            window.checkScavengerCode = () => {
                const input = document.getElementById('hunt-input').value.toUpperCase().trim();
                // Make sure you actually add this code ("FOREVER") into the text inside the Notes App in your HTML!
                if (input === "FOREVER") {
                    alert("Detective skills on point! Key Fragment: 'P'");
                    // We use 'P2' here just to store it uniquely in the array if you have duplicate letters
                    // But visually it will just show P
                    if(!collectedKeys.includes("P")) {
                        collectedKeys.push("P");
                        localStorage.setItem('birthdayKeys', JSON.stringify(collectedKeys));
                        renderKeys();
                        setTimeout(() => { openApp('keys'); }, 1000);
                    }
                    closeApp('game');
                } else {
                    alert("Not quite! Check the Notes app again.");
                }
            };
        }

        function saveKey(key) {
            if(!collectedKeys.includes(key)) {
                collectedKeys.push(key);
                localStorage.setItem('birthdayKeys', JSON.stringify(collectedKeys));
                renderKeys();
                setTimeout(() => { openApp('keys'); }, 1000);
            }
        }
    </script>
</body>
</html>